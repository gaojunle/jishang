<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>影院详情</title>
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, viewport-fit=cover" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="./css/lib/vant.css" />
    <link rel="stylesheet" href="./css/lib/common.css" />
    <link rel="stylesheet" href="./css/lib/swiper.min.css">
    <link rel="stylesheet" href="./css/page/cinemaDetail.css" />

    <script src="./js/lib/bak/viewbox.js"></script>
    <!-- 引入 Vue 和 Vant 的 JS 文件 -->
    <script src="./js/lib/vue.min.js"></script>
    <script src="./js/lib/vant.min.js"></script>
    <script src="./js/lib/jquery.min.js"></script>
    <script src="./js/lib/swiper.min.5.3.6.js"></script>
    <script src="./js/lib/moment.min.js"></script>
</head>

<body>
    <div id="app">
        <!-- 影院位置信息 -->
        <div class="addr_top">
            <div class="left">
                <div class="title_box">
                    <div class="title ellipsis">中影CFR国际影城（望京商业中心店）中影CFR国际影城（望京商业中心店）</div>
                    <img @click="doLocation"
                        src="data:image/png;base64,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"
                        class="img-icon">
                </div>
                <div class="addr_detail">朝阳区望京街9号商业楼-1层01</div>
            </div>
        </div>
        <!-- 电影列表 -->
        <div class="films-swiper-box">
            <div class="swiper-container">
                <div class="swiper-wrapper">
                    <div class="swiper-slide" v-for="(item,idx) in filmList" @click="changeSwiper(idx)"><img
                            src="./img/home/m1.jpg" alt=""></div>
                </div>
                <!-- Add Pagination -->
                <div class="swiper-pagination"></div>
            </div>
            <div class="film_desc">
                <div class="title">{{selFilm.f_title}}</div>
                <div class="desc">{{selFilm.f_desc}}</div>
            </div>
        </div>

        <!-- 日期选择 -->
        <div class="scrollXBox">
            <div class="date-item" :class="{active:filter.selectedDate==item}" v-for="(item,idx) in dateItemList"
                @click="handleSelDate(item)">{{formatDate(item)}}</div>
        </div>

        <!-- 场次列表 -->
        <div class="movie_list">
            <div class="item" v-for="(item,idx) in movieList" :key="idx">
                <div class="left">
                    <div class="line">
                        <p><span class="date">{{item.f_sdate}}</span>开场</p>
                        <p>{{item.f_lang}} {{item.f_type}}</p>
                    </div>
                    <img class="arrow-icon"
                        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAGCAYAAACij5zfAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFZJREFUeNpivHv3LgMdACcQewDxenQJJgb6gP9AvA6IdwCx1kA44AeUdgfii0A8FYiF6ekAGPgJxJ+BOBKIjwOxJws0eOgF2KEYBASBeBu9QwADAAQYABCHDhURR2PYAAAAAElFTkSuQmCC">
                    <div class="line">
                        <p><span class="date">{{item.f_edate}}</span>开场</p>
                        <p>{{item.f_num}} {{item.f_pos}}</p>
                    </div>
                </div>
                <div class="center">
                    ¥<span class="price">{{item.f_price}}</span>
                </div>
                <div class="right">
                    <div class="btn" @click="doBuy(item.f_id)">购票</div>
                </div>
            </div>
        </div>

        <!-- 底部导航 -->
        <div class="footer-nav">
            <a href="./01_首页.html" class="home">首页</a>
            <a href="./02_影院.html" class="cinema on">影院</a>
            <a href="./03_我的.html" class="my">我的</a>
        </div>
    </div>

    <script>
        new Vue({
            el: '#app',
            data: {
                filter: {
                    city: '北京市',
                    selectFilmId: '1',
                    selectedDate: '2021-03-01',
                },
                selFilm: {},//当前选中电影项
                dateItemList: ['2021-03-01', '2021-03-02', '2021-03-03', '2021-03-04'],
                filmList: [
                    {
                        f_id: '111',
                        f_title: '猫和老鼠1',
                        f_desc: '美国/101分钟/喜剧,动画,冒险'
                    },
                    {
                        f_id: '2',
                        f_title: '猫和老鼠2',
                        f_desc: '美国/101分钟/喜剧,动画,冒险'
                    },
                    {
                        f_id: '3',
                        f_title: '猫和老鼠3',
                        f_desc: '美国/101分钟/喜剧,动画,冒险'
                    },
                    {
                        f_id: '4',
                        f_title: '猫和老鼠4',
                        f_desc: '美国/101分钟/喜剧,动画,冒险'
                    },
                ],
                movieList: [
                    {
                        f_id: '111',
                        f_sdate: '14:10',
                        f_edate: '15:33',
                        f_price: '36.00',
                        f_lang: '国语',
                        f_type: '2D',
                        f_num: '4号厅',
                        f_pos: ' 普通厅'
                    },
                    {
                        f_id: '111',
                        f_sdate: '14:10',
                        f_edate: '15:33',
                        f_price: '36.00',
                        f_lang: '国语',
                        f_type: '2D',
                        f_num: '4号厅',
                        f_pos: ' 普通厅'
                    },
                    {
                        f_id: '111',
                        f_sdate: '14:10',
                        f_edate: '15:33',
                        f_price: '36.00',
                        f_lang: '国语',
                        f_type: '2D',
                        f_num: '4号厅',
                        f_pos: ' 普通厅'
                    }
                ]
            },
            watch: {
                filter: {
                    deep: true,
                    handler() {
                        console.log('过滤条件发生变化，这里统一处理', this.filter)
                    }
                }
            },
            mounted() {
                this.initSwiper()
            },
            methods: {
                formatDate(dateStr) {
                    var weekday = ['一', '二', '三', '四', '五', '六', '日'][(parseInt(moment(dateStr).format('e')) - 1)]
                    return moment(dateStr).format('MM月DD日') + ' 周' + weekday;
                },
                handleSelDate(item) {
                    this.filter.selectedDate = item
                },
                // 初始化轮播，一定要在获取数据后调用
                initSwiper() {
                    var self = this;
                    setTimeout(function () {
                        self.swiper = new Swiper('.swiper-container', {
                            slidesPerView: 5,
                            spaceBetween: 10,
                            centeredSlides: true,
                            loop: false
                        });
                        self.selFilm = self.filmList[0]
                    }, 100)
                },
                changeSwiper(idx) {
                    var self = this;
                    this.swiper.slideTo(idx)
                    this.filter.selectFilmId = self.filmList[idx].f_id
                    setTimeout(function () {
                        self.selFilm = self.filmList[idx]
                    }, 200)
                },
                doLocation() {
                    alert('doLocation')
                },
                doBuy(id) {
                    location.href = './04_选座.html?id=' + id
                }
            }
        });
    </script>
</body>

</html>